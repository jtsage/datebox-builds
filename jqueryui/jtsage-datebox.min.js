/*! JTSage-DateBox-4.4.2 |2019-02-27T18:10:30Z | (c) 2010,  2019 JTSage | https://github.com/jtsage/jquery-mobile-datebox/blob/master/LICENSE.txt */

!function(j){j.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{version:"4.4.2",jqmVersion:"1.4.5",bootstrapVersion:"3.3.7",bootstrap4Version:"4.2.1",jqmuiWidgetVersion:"1.11.4",theme:!1,themeDefault:"a",themeHeader:"a",themeSetButton:"a",themeCloseButton:"",extraInputClass:"",mode:!1,transition:"fade",useAnimation:!0,hideInput:!1,hideContainer:!1,lockInput:!0,zindex:"1100",clickEvent:"click",clickEventAlt:"click",useKinetic:!0,defaultValue:!1,showInitialValue:!1,linkedField:!1,linkedFieldFormat:"%J",popupPosition:!1,popupButtonPosition:"left",popupForceX:!1,popupForceY:!1,useModal:!0,useModalTheme:"b",useInline:!1,useInlineBlind:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!0,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,closeTodayButton:!1,useTomorrowButton:!1,closeTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],runOnBlurCallback:!1,startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDays:!1,whiteDates:!0,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,twoDigitYearCutoff:38,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{default:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],datetimeFieldOrder:["y","m","d","h","i","s","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",datetimeFormat:"%Y-%m-%dT%k:%M:%S",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},themeDateToday:"ui-state-highlight",themeDayHigh:"",themeDatePick:"ui-state-active",themeDateHigh:"",themeDateHighAlt:"",themeDateHighRec:"",themeDate:"",themeButton:"",themeInput:"",themeClearButton:"",themeCancelButton:"",themeTomorrowButton:"",themeTodayButton:"",buttonIconDate:"calendar",buttonIconTime:"time",disabledState:"ui-state-disabled",calNextMonthIcon:"plus",calPrevMonthIcon:"minus",useInlineAlign:"left",useAnimationTime:400,btnCls:" ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ",icnCls:" ui-icon ui-icon-",s:{cal:{prevMonth:"<button class='ui-button ui-widget ui-state-default ui-corner-all'><span title='{text}' class='ui-icon ui-icon-{icon}'></span></button>",nextMonth:"<button class='ui-button ui-widget ui-state-default ui-corner-all'><span title='{text}' class='ui-icon ui-icon-{icon}'></span></button>",botButton:"<a href='#' class='{cls}' role='button'><span class='{icon}'></span> {text}</a>"}},useSelectMenu:!1,tranDone:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",calHighToday:!0,calHighPick:!0,calShowDays:!0,calOnlyMonth:!1,calWeekMode:!1,calWeekModeDay:1,calControlGroup:!1,calShowWeek:!1,calUsePickers:!1,calNoHeader:!1,calFormatter:!1,calAlwaysValidateDates:!1,calYearPickMin:-6,calYearPickMax:6,calYearPickRelative:!0,calBeforeAppendFunc:function(e){return e},highDays:!1,highDates:!1,highDatesRec:!1,highDatesAlt:!1,enableDates:!1,calDateList:!1,calShowDateList:!1,validHours:!1,repButton:!0,durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1},flipboxLensAdjust:!1,flen:{y:25,m:24,d:40,h:24,i:30,s:30},slen:{y:9,m:14,d:16,h:16,i:30}},_getLongOptions:function(e){var t,a,n={};for(t in e.data())"datebox"===t.substr(0,7)&&7<t.length&&"options"!==(a=(a=t.substr(7)).charAt(0).toLowerCase()+a.slice(1))&&(n[a]=e.data(t));return n},_setOption:function(){j.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},baseMode:"jqueryui",_stdBtn:{cancel:function(){var t=this,e=this.options;return j("<div class='"+e.btnCls+"'><span class='ui-button-text'>"+t.__("cancelButton")+"</span></div>").addClass(e.themeCancelButton).on(e.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,e=this.options;return j("<div class='"+e.btnCls+"'><span class='ui-button-text'>"+t.__("clearButton")+"</span></div>").addClass(e.themeClearButton).on(e.clickEventAlt,function(e){e.preventDefault(),e.stopPropagation(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(e,t){var a=this,n=this.options;return void 0===t&&(t=!1),j("<div class='"+n.btnCls+"'><span class='ui-button-text'>"+e+"</span></div>").addClass(!0===a.dateOK?"":"ui-state-disabled").addClass(n.themeCloseButton).on(n.clickEventAlt,function(e){e.preventDefault(),!0===a.dateOK&&(!1===t?a._t({method:"set",value:a._formatter(a.__fmt(),a.theDate),date:a.theDate}):a._t(t),a._t({method:"close"}))})},today:function(){var t=this,a=this.options;return j("<div class='"+a.btnCls+"'><span class='ui-button-text'>"+t.__("todayButtonLabel")+"</span></div>").addClass(a.themeTodayButton).on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t.calBackDate=!1,t._t({method:"doset"}),!0===a.closeTodayButton&&t._t({method:"close"})})},tomorrow:function(){var t=this,a=this.options;return j("<div class='"+a.btnCls+"'><span class='ui-button-text'>"+t.__("tomorrowButtonLabel")+"</span></div>").addClass(a.themeTomorrowButton).on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t.calBackDate=!1,t._t({method:"doset"}),!0===a.closeTomorrowButton&&t._t({method:"close"})})}},_destroy:function(){var e=this,t=this.options,a=this.d.wrap.find(".input-group-addon");!0===t.useButton&&(a.remove(),e.d.input.unwrap()),t.lockInput&&e.d.input.removeAttr("readonly"),e.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox"),j(document).off(e.drag.eMove).off(e.drag.eEnd).off(e.drag.eEndA)},_create:function(){j(document).trigger("dateboxcreate");var e,t,a=this,n=j.extend(this.options,this._getLongOptions(this.element),this.element.data("options")),i=!1===n.theme?"default":n.theme,o={input:this.element,wrap:this.element.parent(),mainWrap:j("<div>",{class:"ui-datebox-container"}).css("zIndex",n.zindex),intHTML:!1},s=".datebox"+this.uuid,r=void 0!==window.ontouchstart,d={eStart:"touchstart"+s+" mousedown"+s,eMove:"touchmove"+s+" mousemove"+s,eEnd:"touchend"+s+" mouseup"+s,eEndA:["mouseup","touchend","touchcancel","touchmove"].join(s+" ")+s,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};j.extend(a,{d:o,drag:d,touch:r}),!1!==n.usePlaceholder&&(!0===n.usePlaceholder&&""!==a._grabLabel()&&a.d.input.attr("placeholder",a._grabLabel()),"string"==typeof n.usePlaceholder&&a.d.input.attr("placeholder",n.usePlaceholder)),n.theme=i,a.cancelClose=!1,a.calBackDate=!1,a.calDateVisible=!0,a.disabled=!1,a.runButton=!1,a._date=window.Date,a._enhanceDate(),a.baseID=a.d.input.attr("id"),a.initDate=new a._date,a.initDate.setMilliseconds(0),a.theDate=n.defaultValue?a._makeDate():""!==a.d.input.val()?a._makeDate(a.d.input.val()):new a._date,""===a.d.input.val()&&a._startOffset(a.theDate),a.initDone=!1,n.showInitialValue&&a.d.input.val(a._formatter(a.__fmt(),a.theDate)),a.d.wrap=a.d.input.wrap("<div class='datebox-input'>").parent(),!1!==n.mode&&!1===n.buttonIcon&&("time"===n.mode.substr(0,4)||"dur"===n.mode.substr(0,3)?n.buttonIcon=n.buttonIconTime:n.buttonIcon=n.buttonIconDate),n.useButton?j("<div class='datebox-input-icon'><span class='"+n.icnCls+n.buttonIcon+"'></span></div>").attr("title",a.__("tooltip")).on(n.clickEvent,function(e){e.preventDefault(),n.useFocus?a.d.input.focus():a.disabled||a._t({method:"open"})}).appendTo(a.d.wrap):a.d.wrap.css("width","100%"),n.hideInput&&a.d.wrap.hide(),n.hideContainer&&a.d.wrap.parent().hide(),a.d.input.on("focus.datebox",function(){a.d.input.addClass("ui-focus"),!1===a.disabled&&n.useFocus&&a._t({method:"open"})}).on("blur.datebox",function(){a.d.input.removeClass("ui-focus")}).on("change.datebox",function(){"function"==typeof n.runOnBlurCallback&&(e=a._makeDate(a.d.input.val(),!0),"object"!=typeof(t=n.runOnBlurCallback.apply(a,[{oldDate:a.theDate,newDate:e[0],wasGoodDate:!e[1],wasBadDate:e[1]}]))||!0===t.didSomething&&a.d.input.val(t.newDate)),a.theDate=a._makeDate(a.d.input.val()),a.refresh()}).on("datebox",a._event),n.lockInput&&a.d.input.attr("readonly","readonly"),void 0!==j.event.special.mousewheel&&(a.wheelExists=!0),a.d.input.is(":disabled")&&a.disable(),a.applyMinMax(!1,!1),a.d.input.on("datebox",function(e,t){var a=j(this).data("jtsage-datebox"),n=j(this).data("jtsage-datebox").options;"postrefresh"===t.method&&n.useSelectMenu&&a.d.intHTML.find("select").each(function(){j(this).selectmenu()})}),(n.useInline||n.useInlineBlind)&&a.open(),j(document).trigger("dateboxaftercreate")},open:function(){var e,t=this,a=this.options,n={};if(a.useFocus&&!0===t.fastReopen)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.calBackDate=!1,""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),void 0===t._build[a.mode]?t._build.default.apply(t,[]):t._build[a.mode].apply(t,[]),void 0!==t._drag[a.mode]&&t._drag[a.mode].apply(t,[]),t._t({method:"refresh"}),!0===t.__("useArabicIndic")&&t._doIndic(),a.useInline&&!1===t.initDone){switch(t.d.mainWrap.append(t.d.intHTML),a.hideContainer?(a.useHeader&&t.d.mainWrap.prepend(j(t._spf("<div class='{c1}'><h4 class='{c2}'>{text}</h4></div>",{c1:"ui-datebox-header",c2:"ui-datebox-header-title",text:t.d.headerText}))),t.d.wrap.parent().after(t.d.mainWrap)):t.d.wrap.parent().append(t.d.mainWrap),a.useInlineAlign){case"right":t.d.mainWrap.css({marginRight:0,marginLeft:"auto"});break;case"left":t.d.mainWrap.css({marginLeft:0,marginRight:"auto"});break;case"center":case"middle":t.d.mainWrap.css({marginLeft:"auto",marginRight:"auto"})}if(t.d.mainWrap.removeClass("ui-datebox-hidden ui-overlay-shadow"),t.d.mainWrap.addClass("ui-corner-all ui-widget ui-widget-content"),a.useInline)return t.d.mainWrap.addClass("ui-datebox-inline").css("zIndex","auto"),a.hideInput||a.hideContainer||t.d.mainWrap.addClass("ui-datebox-inline-has-input"),setTimeout((e=t,function(){e._t({method:"postrefresh"})}),100),!0;t.d.mainWrap.addClass("ui-datebox-inline ui-datebox-inline-has-input").css("zIndex","auto"),t.d.mainWrap.hide(),t.initDone=!1,t._t({method:"postrefresh"})}return a.useInlineBlind?(t.initDone?(t.refresh(),t.d.mainWrap.slideDown(),t._t({method:"postrefresh"})):t.initDone=!0,!0):!t.d.intHTML.is(":visible")&&(t.d.mainWrap.empty(),t.d.mainWrap.addClass("ui-corner-all ui-widget ui-widget-content"),t.d.mainWrap.append(t.d.intHTML).css({zIndex:a.zindex,position:"absolute",top:t.d.input.offset().top+t.d.input.height,left:t.d.input.offset().left}),t._t({method:"postrefresh"}),!1!==a.openCallback?(j.isFunction(a.openCallback)||"function"==typeof window[a.openCallback]&&(a.openCallback=window[a.openCallback]),n.afteropen=function(){t._t({method:"postrefresh"}),!1===a.openCallback.apply(t,j.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.openCallbackArgs))&&t._t({method:"close"})}):n.afteropen=function(){t._t({method:"postrefresh"})},(!1===a.beforeOpenCallback||(j.isFunction(a.beforeOpenCallback)||"function"==typeof window[a.beforeOpenCallback]&&(a.beforeOpenCallback=window[a.beforeOpenCallback]),!1!==a.beforeOpenCallback.apply(t,j.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.beforeOpenCallbackArgs))))&&(t.d.mainWrap.css("display","none").appendTo(t.d.wrap),t.d.backdrop=j("<div></div>").css({position:"fixed",left:0,top:0,bottom:0,right:0}).addClass("ui-widget-overlay").appendTo("body").on(a.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})}),void window.setTimeout(function(){t.d.mainWrap.slideDown(!0===a.useAnimation?a.useAnimationTime:0,function(){n.afteropen.call()})},0)))},close:function(){var e,t=this,a=this.options,n={};if(t.calBackDate=!1,a.useInline||!1===t.d.intHTML)return!0;!1!==a.closeCallback?(j.isFunction(a.closeCallback)||"function"==typeof window[a.closeCallback]&&(a.closeCallback=window[a.closeCallback]),n.afterclose=function(){a.closeCallback.apply(t,j.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration,cancelClose:t.cancelClose}],a.closeCallbackArgs))}):n.afterclose=function(){return!0},t.d.backdrop.remove(),t.d.mainWrap.slideUp(!0===a.useAnimation?a.useAnimationTime:0,function(){n.afterclose.call()}),j(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA),a.useFocus&&(t.fastReopen=!0,setTimeout((e=t,function(){e.fastReopen=!1}),300))},disable:function(){var e=this;e.d.input.attr("disabled",!0),e.disabled=!0,e._t({method:"disable"})},enable:function(){this.d.input.attr("disabled",!1),this.disabled=!1,this._t({method:"enable"})},_controlGroup:function(e){return this.options.useCollapsedBut?e.find(".ui-button").css({marginRight:"0px"}).removeClass("ui-corner-all").first().addClass("ui-corner-left").end().last().addClass("ui-corner-right"):e.find(".ui-button").css({width:"90% "}).removeClass("ui-corner-all").first().addClass("ui-corner-top").end().last().addClass("ui-corner-bottom"),e},_enhanceDate:function(){j.extend(this._date.prototype,{copy:function(e,t){return e=j.extend([0,0,0,0,0,0,0],e),t=j.extend([0,0,0,0,0,0,0],t),new Date(0<t[0]?t[0]:this.get(0)+e[0],0<t[1]?t[1]:this.get(1)+e[1],0<t[2]?t[2]:this.get(2)+e[2],0<t[3]?t[3]:this.get(3)+e[3],0<t[4]?t[4]:this.get(4)+e[4],0<t[5]?t[5]:this.get(5)+e[5],0<t[6]?t[5]:this.get(6)+e[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),10<this.get(2)&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&28<this.getDate()?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),(a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1)<1?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_ord:{default:function(e){var t=e%10;return 9<e&&e<21||3<t?"th":["th","st","nd","rd"][t]}},_customformat:{default:function(){return!1}},_formatter:function(e,n,t){var i,o=this,s=this.options,r=0;return void 0===t&&(t=!0),"dura"===s.mode.substr(0,4)&&(r=o._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(r[1]+=24*r[0]),e.match(/%Dl/)||(r[2]+=60*r[1]),e.match(/%DM/)||(r[3]+=60*r[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,t,a){if("X"===t)return void 0!==o._customformat[s.mode]?o._customformat[s.mode](a,n,s):e;if("D"===t)switch(a){case"d":return r[0];case"l":return o._zPad(r[1]);case"M":return o._zPad(r[2]);case"S":return o._zPad(r[3]);case"A":return o.__("durationDays")[1===r[0]?0:1];default:return e}switch(a){case"a":return o.__("daysOfWeekShort")[n.getDay()];case"A":return o.__("daysOfWeek")[n.getDay()];case"b":return o.__("monthsOfYearShort")[n.getMonth()];case"B":return o.__("monthsOfYear")[n.getMonth()];case"C":return parseInt(n.getFullYear()/100);case"d":return o._zPad(n.getDate(),t);case"H":case"k":return o._zPad(n.getHours(),t);case"I":case"l":return o._zPad(n.get12hr(),t);case"m":return o._zPad(n.getMonth()+1,t);case"M":return o._zPad(n.getMinutes(),t);case"p":case"P":return i=o.__("meridiem")[n.get(3)<12?0:1].toUpperCase(),"P"===a?i.toLowerCase():i;case"s":return n.getEpoch();case"S":return o._zPad(n.getSeconds(),t);case"u":return o._zPad(n.getDay()+1,t);case"w":return n.getDay();case"y":return o._zPad(n.getFullYear()%100);case"Y":return n.getFullYear();case"E":return n.getFullYear()+543;case"V":return o._zPad(n.getDWeek(4),t);case"U":return o._zPad(n.getDWeek(0),t);case"W":return o._zPad(n.getDWeek(1),t);case"o":return void 0!==o._ord[s.useLang]?o._ord[s.useLang](n.getDate()):o._ord.default(n.getDate());case"j":return i=new Date(n.getFullYear(),0,1),(i="000"+String(Math.ceil((n-i)/864e5)+1)).slice(-3);case"J":return n.toJSON();case"G":return i=n.getFullYear(),1===n.getDWeek(4)&&0<n.getMonth()?i+1:51<n.getDWeek(4)&&n.getMonth()<11?i-1:i;case"g":return i=n.getFullYear%100,1===n.getDWeek(4)&&0<n.getMonth()&&++i,51<n.getDWeek(4)&&n.getMonth()<11&&--i,o._zpad(i);default:return e}}),!0===o.__("useArabicIndic")&&!0===t&&(e=o._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,n=e%t;1<t&&0<n&&(a<0?e-=n:0<a?e+=t-n:e%t<t/2?e-=n:e+=t-n,this.theDate.setMinutes(e))},_check:function(){var e,t,a,n,i,o,s=this,r=this.options,d=this.theDate;if(s.dateOK=!0,void 0===r.mode)return!0;if(r.afterToday&&d<(e=new s._date)&&(d=e),r.beforeToday&&(e=new s._date)<d&&(d=e),!1!==r.maxDays&&((e=new s._date).adj(2,r.maxDays),e<d&&(d=e)),!1!==r.minDays&&((e=new s._date).adj(2,-1*r.minDays),d<e&&(d=e)),!1!==r.minHour&&d.get(3)<r.minHour&&d.setD(3,r.minHour),!1!==r.maxHour&&d.get(3)>r.maxHour&&d.setD(3,r.maxHour),!1!==r.minTime&&(e=new s._date,o=r.minTime.split(":"),e.setD(3,o[0]).setD(4,o[1]),d<e&&(d=e)),!1!==r.maxTime&&(e=new s._date,o=r.maxTime.split(":"),e.setD(3,o[0]).setD(4,o[1]),e<d&&(d=e)),!1!==r.maxYear&&(e=new s._date(r.maxYear,11,31))<d&&(d=e),!1!==r.minYear&&d<(e=new s._date(r.minYear,0,1))&&(d=e),"time"===r.mode.substr(0,4)||"dur"===r.mode.substr(0,3))"timeflipbox"===r.mode&&!1!==r.validHours&&j.inArray(d.get(3),r.validHours)<0&&(s.dateOK=!1);else{if(!1!==r.blackDatesRec)for(t=d.get(0),a=d.get(1),n=d.get(2),i=0;i<r.blackDatesRec.length;i++)-1!==r.blackDatesRec[i][0]&&r.blackDatesRec[i][0]!==t||-1!==r.blackDatesRec[i][1]&&r.blackDatesRec[i][1]!==a||-1!==r.blackDatesRec[i][2]&&r.blackDatesRec[i][2]!==n||(s.dateOK=!1);!1!==r.blackDates&&-1<j.inArray(d.iso(),r.blackDates)&&(s.dateOK=!1),!1!==r.blackDays&&-1<j.inArray(d.getDay(),r.blackDays)&&(s.dateOK=!1),!1!==r.whiteDates&&-1<j.inArray(s.theDate.iso(),r.whiteDates)&&(s.dateOK=!0,d=s.theDate)}s.theDate=d},_fixstepper:function(e){var t=this.options.durationSteppers,a=this.options.durationStep;-1<j.inArray("d",e)&&(t.d=a),-1<j.inArray("h",e)&&(t.d=1,t.h=a),-1<j.inArray("i",e)&&(t.h=1,t.i=a),-1<j.inArray("s",e)&&(t.i=1,t.s=a)},_parser:{default:function(){return!1}},_makeDate:function(e,t){var a,n,i,o,s=this,r=this.options,d=this.options.defaultValue,l=s.__fmt(),c=null,u=[],p=!1,h=new s._date,f={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(void 0===t&&(t=!1),e=j.trim(!0===s.__("useArabicIndic")&&void 0!==e?s._dRep(e,-1):e),void 0===r.mode)return h;if(void 0!==s._parser[r.mode])return s._parser[r.mode].apply(s,[e]);if("durationbox"===r.mode||"durationflipbox"===r.mode){if(l=l.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),c=(l=new RegExp("^"+l+"$")).exec(e),i=l.exec(s.__fmt()),null===c||c.length!==i.length)return"number"==typeof d&&0<d?new s._date(1e3*(s.initDate.getEpoch()+parseInt(d,10))):new s._date(s.initDate.getTime());for(n=s.initDate.getEpoch(),a=1;a<c.length;a++)o=parseInt(c[a],10),i[a].match(/^%Dd$/i)&&(n+=86400*o),i[a].match(/^%Dl$/i)&&(n+=3600*o),i[a].match(/^%DM$/i)&&(n+=60*o),i[a].match(/^%DS$/i)&&(n+=o);return new s._date(1e3*n)}if("%J"===l)return h=new s._date(e),isNaN(h.getDate())&&(h=new s._date),h;if(l=l.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(u.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return u.pop(),".+?"}}),c=(l=new RegExp("^"+l+"$")).exec(e),i=l.exec(s.__fmt()),null===c||c.length!==i.length){if(""!==e&&(p=!0),!1!==d&&""!==d)switch(typeof d){case"object":j.isFunction(d.getDay)?h=d:3===d.length&&(h=s._pa(d,"time"===r.mode.substr(0,4)&&h));break;case"number":h=new s._date(1e3*d);break;case"string":"time"===r.mode.substr(0,4)?(n=j.extend([0,0,0],d.split(":")).slice(0,3),h=s._pa(n,h)):((n=j.extend([0,0,0],d.split("-")).slice(0,3))[1]--,h=s._pa(n,!1))}isNaN(h.getDate())&&(h=new s._date)}else{for(a=1;a<c.length;a++)switch(o=parseInt(c[a],10),u[a-1]){case"s":return new s._date(1e3*parseInt(c[a],10));case"Y":case"G":f.year=o;break;case"E":f.year=o-543;break;case"y":case"g":r.afterToday||o<r.twoDigitYearCutoff?f.year=2e3+o:f.year=1900+o;break;case"m":f.mont=o-1;break;case"d":f.date=o;break;case"H":case"k":case"I":case"l":f.hour=o;break;case"M":f.mins=o;break;case"S":f.secs=o;break;case"u":f.wday=o-1;break;case"w":f.wday=o;break;case"j":f.yday=o;break;case"V":f.week=o,f.wtyp=4;break;case"U":f.week=o,f.wtyp=0;break;case"W":f.week=o,f.wtyp=1;break;case"p":case"P":o=new RegExp("^"+c[a]+"$","i"),f.meri=o.test(s.__("meridiem")[0])?-1:1;break;case"b":-1<(n=j.inArray(c[a],s.__("monthsOfYearShort")))&&(f.mont=n);break;case"B":-1<(n=j.inArray(c[a],s.__("monthsOfYear")))&&(f.mont=n)}if(0!==f.meri&&(-1===f.meri&&12===f.hour&&(f.hour=0),1===f.meri&&12!==f.hour&&(f.hour=f.hour+12)),h=new s._date(s._n(f.year,0),s._n(f.mont,0),s._n(f.date,1),s._n(f.hour,0),s._n(f.mins,0),s._n(f.secs,0),0),f.year<100&&-1!==f.year&&h.setFullYear(f.year),-1<f.mont&&-1<f.date||-1<f.hour&&-1<f.mins&&-1<f.secs)return!0===t?[h,p]:h;!1!==f.week&&(h.setDWeek(f.wtyp,f.week),-1<f.date&&h.setDate(f.date)),!1!==f.yday&&h.setD(1,0).setD(2,1).adj(2,f.yday-1),!1!==f.wday&&h.adj(2,f.wday-h.getDay())}return!0===t?[h,p]:h},_event:function(e,t){var a,n=j(this).data("jtsage-datebox"),i=j(this).data("jtsage-datebox").options;if(!e.isPropagationStopped())switch(t.method){case"close":void 0===t.closeCancel&&(t.closeCancel=!1),n.cancelClose=t.closeCancel,n.close();break;case"open":n.open();break;case"set":"object"==typeof t.value?(n.theDate=t.value,n._t({method:"doset"})):(j(this).val(t.value),!1!==i.linkedField&&j(i.linkedField).val(n.callFormat(i.linkedFieldFormat,n.theDate,!1)),j(this).trigger("change"));break;case"doset":a="_"+n.options.mode+"DoSet",j.isFunction(n[a])?n[a].apply(n,[]):n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate});break;case"dooffset":t.type&&n._offset(t.type,t.amount,!0);break;case"dorefresh":n.refresh();break;case"doclear":j(this).val("").trigger("change");break;case"clear":j(this).trigger("change")}},_build:{default:function(){!(this.d.headerText="Error")!==this.d.intHTML&&this.d.intHTML.remove().empty(),this.d.intHTML=j("<div class='ui-body-b'><h2 style='text-align:center' class='bg-danger'>Unknown Mode</h2></div>")},calbox:function(){var e,t,a,n,i,o,s,r,d,l,c,u,p,h,f,m=this,b=this.options,_=b.calDateList,D="ui-datebox-",g=!1!==m.calBackDate&&m.theDate.get(0)===m.calBackDate.get(0)&&m.theDate.get(1)===m.calBackDate.get(1)?new m._date(m.calBackDate.getTime()):m.theDate,v=!1,y=m.initDate.copy(),x=m.initDate.copy(),k=(g.copy([0],[0,0,1]).getDay()-m.__("calStartDay")+7)%7,w=g.get(1),T=g.get(0),M=g.getArray(),C=""===m.d.input.val()?m._startOffset(m._makeDate(m.d.input.val())):m._makeDate(m.d.input.val()),B=-1,L=new m._date,O=L.getArray(),H=g.copy([0],[0,0,1]).adj(2,-1*k+(0===m.__("calStartDay")?1:0)).getDWeek(4),A=0,S=!1,I=!1,F=32-m.theDate.copy([0],[0,0,32,13]).getDate(),P=32-m.theDate.copy([0,-1],[0,0,32,13]).getDate(),W=!!(b.afterToday||b.beforeToday||b.notToday||b.calAlwaysValidateDates||b.maxDays||b.minDays||b.blackDays||b.blackDates);if(!1!==m.calBackDate&&m.theDate.get(0)===m.calBackDate.get(0)&&m.theDate.get(1)===m.calBackDate.get(1)&&(m.theDate=new m._date(m.calBackDate.getTime()),m.calBackDate=!1),"boolean"!=typeof m.d.intHTML&&(m.d.intHTML.remove(),m.d.intHTML=null),m.d.headerText=!1!==m._grabLabel()?m._grabLabel():m.__("titleDateDialogLabel"),m.d.intHTML=j("<span>"),j(m._spf("<div class='{cl1}'><div class='{cl2}'><h4>{content}</h4></div></div>",{cl1:D+"gridheader",cl2:D+"gridlabel",content:m._formatter(m.__("calHeaderFormat"),m.theDate)})).appendTo(m.d.intHTML),m._cal_prev_next(m.d.intHTML.find("."+D+"gridheader")),b.calNoHeader&&(b.calUsePickersIcons?(m.d.intHTML.find("."+D+"gridlabel").hide(),m.d.intHTML.find("."+D+"gridplus").find(".ui-btn-inline").addClass(D+"nomargbtn"),m.d.intHTML.find("."+D+"gridminus").find(".ui-btn-inline").addClass(D+"nomargbtn")):m.d.intHTML.find("."+D+"gridheader").remove()),m.calNext=!0,m.calPrev=!0,Math.floor(L.comp()/100)===Math.floor(g.comp()/100)&&(S=!0),Math.floor(L.comp()/1e4)===Math.floor(g.comp()/1e4)&&(I=!0),C.comp()===g.comp()&&(B=C.get(2)),b.afterToday&&(S||I&&O[1]>=M[1])&&(m.calPrev=!1),b.beforeToday&&(S||I&&O[1]<=M[1])&&(m.calNext=!1),!1!==b.minDays&&(y.adj(2,-1*b.minDays),e=y.getArray(),M[0]===e[0]&&M[1]<=e[1]&&(m.calPrev=!1)),!1!==b.maxDays&&(x.adj(2,b.maxDays),e=x.getArray(),M[0]===e[0]&&M[1]>=e[1]&&(m.calNext=!1)),b.calUsePickers&&m._cal_pickers(w,T,O),t=j("<div class='"+D+"grid'>").appendTo(m.d.intHTML),b.calShowDays)for(m._cal_days=m.__("daysOfWeekShort").concat(m.__("daysOfWeekShort")),n=j("<div>",{class:D+"gridrow"}).appendTo(t),b.calControlGroup&&n.addClass(D+"gridrow-last"),!0===m.__("isRTL")&&n.css("direction","rtl"),b.calShowWeek&&j("<div>").addClass(D+"griddate "+D+"griddate-label").appendTo(n),l=0;l<=6;l++)j("<div>").text(m._cal_days[(l+m.__("calStartDay"))%7]).addClass(D+"griddate "+D+"griddate-label").appendTo(n);for(f={i:y,x:x,t:L,p:B},a=m._cal_gen(k,P,F,!b.calOnlyMonth,g.get(1)),!j.isFunction(b.calFormatter)&&!1!==b.calFormatter&&j.isFunction(window[b.calFormatter])&&(b.calFormatter=window[b.calFormatter]),!j.isFunction(b.calBeforeAppendFunc)&&!1!==b.calBeforeAppendFunc&&j.isFunction(window[b.calBeforeAppendFunc])&&(b.calBeforeAppendFunc=window[b.calBeforeAppendFunc]),p=new Date(m.theDate.get(0),a[0][0][1],a[0][0][0],0,0,0,0),h=new Date(m.theDate.get(0),a[a.length-1][6][1],a[a.length-1][6][0],0,0,0,0),!1===m.calBackDate?m.calDateVisible=!0:b.calOnlyMonth?m.calDateVisible=!1:m.calBackDate.comp()<p.comp()||m.calBackDate.comp()>h.comp()?m.calDateVisible=!1:m.calDateVisible=!0,i=0,s=a.length;i<s;i++){for(d=j("<div>",{class:D+"gridrow"}),m.__("isRTL")&&d.css("direction","rtl"),b.calShowWeek&&(j("<div>",{class:D+"griddate "+D+"griddate-empty"}).text("W"+H).addClass("bootstrap"===m.baseMode?"pull-left":"").css(b.calControlGroup?{float:"left"}:{}).appendTo(d),52<++H&&void 0!==a[i+1]&&(H=new m._date(M[0],M[1],0===m.__("calStartDay")?a[i+1][1][0]:a[i+1][0][0],0,0,0,0).getDWeek(4))),o=0,r=a[i].length;o<r;o++)b.calWeekMode&&(A=a[i][b.calWeekModeDay][0]),"boolean"==typeof a[i][o]?j("<div>",{class:D+"griddate "+D+"griddate-empty"}).appendTo(d):(v=m._cal_check(W,M[0],a[i][o][1],a[i][o][0],f),a[i][o][0]&&(j.isFunction(b.calFormatter)?((u={Year:11<a[i][o][1]?T+1:a[i][o][1]<0?T-1:T,Month:12===a[i][o][1]?0:-1===a[i][o][1]?11:a[i][o][1],Date:a[i][o][0]}).Arr=[u.Year,m._zPad(u.Month+1),m._zPad(u.Date)],u.ISO=u.Arr.join("-"),u.Comp=u.Arr.join(""),u.curMonth=g.get(1),u.curYear=T,u.dateVisible=m.calDateVisible,c="object"!=typeof(e=b.calFormatter(u))?{text:e,class:""}:{text:e.text,class:e.class}):c={text:a[i][o][0],class:""},b.calBeforeAppendFunc(j("<div>").html(c.text).addClass(D+"griddate").addClass(""+(w===a[i][o][1]||v.force?v.ok||"jqm"!==m.baseMode?b.btnCls+v.theme:b.btnCls+" "+v.theme:D+"griddate-empty"+("bootstrap"===m.baseMode?b.btnCls+"default":"")+(!0===b.calOnlyMonth?" "+b.disabledState:""))).addClass(c.class).css(w===a[i][o][1]||b.calOnlyMonth?{}:{cursor:"pointer"}).data("date",b.calWeekMode?A:a[i][o][0]).data("enabled",v.ok).data("month",a[i][b.calWeekMode?b.calWeekModeDay:o][1])).appendTo(d)));switch(m.baseMode){case"jqm":b.calControlGroup&&(d.find("."+D+"griddate-empty").addClass("ui-btn"),b.calOnlyMonth&&d.find("."+D+"griddate-empty").addClass("ui-state-disabled"),d.controlgroup({type:"horizontal"}));break;case"bootstrap":d.addClass("btn-group");break;case"jqueryui":d.find("."+D+"griddate").removeClass("ui-corner-all").not("."+D+"griddate-empty").first().addClass("ui-corner-left").end().last().addClass("ui-corner-right")}i===s-1&&d.addClass(D+"gridrow-last"),d.appendTo(t)}b.calShowWeek&&t.find("."+D+"griddate").addClass(D+"griddate-week"),b.calShowDateList&&!1!==_&&m._cal_date_list(t),(b.useTodayButton||b.useTomorrowButton||b.useClearButton||b.useCancelButton)&&(d=j("<div>",{class:D+"controls"}),b.useTodayButton&&d.append(m._stdBtn.today.apply(m)),b.useTomorrowButton&&d.append(m._stdBtn.tomorrow.apply(m)),b.useClearButton&&d.append(m._stdBtn.clear.apply(m)),b.useCancelButton&&d.append(m._stdBtn.cancel.apply(m)),m._controlGroup(d).appendTo(t)),m.d.intHTML.on(b.clickEventAlt,"div."+D+"griddate",function(e){e.preventDefault(),j(this).data("enabled")&&(m.calBackDate=!1,m.theDate.setD(2,1).setD(1,j(this).data("month")).setD(2,j(this).data("date")),m._t({method:"set",value:m._formatter(m.__fmt(),m.theDate),date:m.theDate}),m._t({method:"close"}))}),m.d.intHTML.on("swipeleft",function(){m.calNext&&(!1===m.calBackDate&&(m.calBackDate=new Date(m.theDate.getTime())),m._offset("m",1))}).on("swiperight",function(){m.calPrev&&(!1===m.calBackDate&&(m.calBackDate=new Date(m.theDate.getTime())),m._offset("m",-1))}),m.wheelExists&&m.d.intHTML.on("mousewheel",function(e,t){e.preventDefault(),0<t&&m.calNext&&(!1===m.calBackDate&&(m.calBackDate=new Date(m.theDate.getTime())),m.theDate.setD(2,1),m._offset("m",1)),t<0&&m.calPrev&&(!1===m.calBackDate&&(m.calBackDate=new Date(m.theDate.getTime())),m.theDate.setD(2,1),m._offset("m",-1))})},timebox:function(){this._build.datebox.apply(this,[])},datetimebox:function(){this._build.datebox.apply(this,[])},durationbox:function(){this._build.datebox.apply(this,[])},datebox:function(){var e,t,a,n,i,o,s=this,r=this.drag,d=this.options,l="durationbox"===d.mode,c=0,u=["d","h","i","s"],p="ui-datebox-";switch("boolean"!=typeof s.d.intHTML&&s.d.intHTML.empty().remove(),s.d.headerText=!1!==s._grabLabel()?s._grabLabel():"datebox"===d.mode?s.__("titleDateDialogLabel"):s.__("titleTimeDialogLabel"),s.d.intHTML=j("<span>"),d.mode){case"durationbox":s.fldOrder=s.__("durationOrder");break;case"timebox":s.fldOrder=s.__("timeFieldOrder");break;case"datetimebox":s.fldOrder=s.__("datetimeFieldOrder");break;case"datebox":s.fldOrder=s.__("dateFieldOrder")}for(l?(s.dateOK=!0,s._fixstepper(s.fldOrder)):(s._check(),s._minStepFix(),s._dbox_vhour(void 0!==s._dbox_delta?s._dbox_delta:1)),"datebox"!==d.mode&&"datetimebox"!==d.mode||(a="bootstrap4"===s.baseMode?"h6":"h4",j(s._spf("<div class='{cls}'><"+a+">{text}</"+a+"></div>",{cls:p+"header text-center",text:s._formatter(s.__("headerFormat"),s.theDate)})).appendTo(s.d.intHTML)),n=j("<div>").addClass(p+"datebox-groups"),t=0;t<s.fldOrder.length;t++)i=j("<div>").addClass(p+"datebox-group"),"jqm"===s.baseMode&&i.addClass("ui-block-"+["a","b","c","d","e","f","g"][c]),e=l?d.durationSteppers[s.fldOrder[t]]:"i"===s.fldOrder[t]?d.minuteStep:1,"a"===s.fldOrder[t]&&12!==s.__("timeFormat")||(s._dbox_button(1,s.fldOrder[t],e).appendTo(i),l&&j(s._spf("<div><label>{text}</label></div>",{text:s.__("durationLabel")[j.inArray(s.fldOrder[t],u)]})).addClass(p+"datebox-label ui-body-"+d.themeInput).appendTo(i),j("<div><input class='form-control w-100 "+d.extraInputClass+"' type='text'></div>").addClass(function(){switch(s.baseMode){case"jqm":return"ui-input-text ui-body-"+d.themeInput+" ui-mini";case"bootstrap":case"bootstrap4":return d.themeInput;default:return null}}).appendTo(i).find("input").data({field:s.fldOrder[t],amount:e}).addClass(function(){if("bootstrap4"===s.baseMode&&4<s.fldOrder.length)return"px-0"}),s._dbox_button(-1,s.fldOrder[t],e).appendTo(i),i.appendTo(n),c++);switch(s.baseMode){case"jqm":n.addClass("ui-grid-"+[0,0,"a","b","c","d","e","f","g"][c]),4<c&&n.find("input").each(function(){j(this).css({"padding-left":0,"padding-right":0})});break;case"bootstrap":a=Math.floor(100/c)+"%",n.find("."+p+"datebox-group").each(function(){j(this).css({"padding-left":0,"padding-right":0,display:"inline-block",width:a})}),4<c&&n.find("input").each(function(){j(this).css({"padding-left":0,"padding-right":0})});break;case"bootstrap4":n.addClass("d-flex flex-row"),n.find("."+p+"datebox-group");break;case"jqueryui":n.find("."+p+"datebox-group").each(function(){j(this).css("width",100/c+"%")})}if(n.appendTo(s.d.intHTML),s.d.divIn=n,s._dbox_run_update(!0),d.useSetButton||d.useClearButton||d.useCancelButton||d.useTodayButton||d.useTomorrowButton){if(o=j("<div>",{class:p+"controls"}),d.useSetButton){switch(d.mode){case"timebox":a=s.__("setTimeButtonLabel");break;case"durationbox":a=s.__("setDurationButtonLabel");break;case"datebox":case"datetimebox":a=s.__("setDateButtonLabel")}s.setBut=s._stdBtn.close.apply(s,[a]),s.setBut.appendTo(o)}d.useTodayButton&&o.append(s._stdBtn.today.apply(s)),d.useTomorrowButton&&o.append(s._stdBtn.tomorrow.apply(s)),d.useClearButton&&o.append(s._stdBtn.clear.apply(s)),d.useCancelButton&&o.append(s._stdBtn.cancel.apply(s)),s._controlGroup(o).appendTo(s.d.intHTML)}d.repButton||s.d.intHTML.on(d.clickEvent,"."+p+"datebox-button",function(e){n.find(":focus").blur(),e.preventDefault(),s._dbox_delta=1<j(this).data("amount")?1:-1,s._offset(j(this).data("field"),j(this).data("amount"))}),n.on("change","input",function(){s._dbox_enter(j(this))}),n.on("keypress","input",function(e){13===e.which&&!0===s.dateOK&&(s._dbox_enter(j(this)),s._t({method:"set",value:s._formatter(s.__fmt(),s.theDate),date:s.theDate}),s._t({method:"close"}))}),s.wheelExists&&n.on("mousewheel","input",function(e,t){e.preventDefault(),s._dbox_delta=t<0?-1:1,s._offset(j(this).data("field"),(t<0?-1:1)*j(this).data("amount"))}),d.repButton&&(s.d.intHTML.on(r.eStart,"."+p+"datebox-button",function(e){e.preventDefault(),n.find(":focus").blur(),a=[j(this).data("field"),j(this).data("amount")],r.move=!0,r.cnt=0,s._dbox_delta=1<j(this).data("amount")?1:-1,s._offset(a[0],a[1],!1),s._dbox_run_update(),s.runButton||(r.target=a,s.runButton=setTimeout(function(){s._dbox_run()},500))}),s.d.intHTML.on(r.eEndA,"."+p+"datebox-button",function(e){r.move&&(e.preventDefault(),clearTimeout(s.runButton),s.runButton=!1,r.move=!1)}))},timeflipbox:function(){this._build.flipbox.apply(this)},datetimeflipbox:function(){this._build.flipbox.apply(this)},durationflipbox:function(){this._build.flipbox.apply(this)},flipbox:function(){var e,t,a,n,i,o,s,r,d,l=this,c=this.options,u=this.drag,p={},h=["d","h","i","s"],f="durationflipbox"===c.mode,m="ui-datebox-",b=m+"flipcontent",_=j("<div class='ui-overlay-shadow'><ul></ul></div>"),D=j("<div>",{class:m+"flipcontent"}),g=l.theDate.getTime()-l.initDate.getTime(),v="",y=l._dur(g<0?0:g);switch(l.baseMode){case"jqm":v="ui-body-";break;case"bootstrap":v="bg-";break;case"bootstrap4":v="p-0 m-0 btn btn-block btn-outline-"}switch(g<0?(l.lastDuration=0,f&&l.theDate.setTime(l.initDate.getTime())):f&&(l.lastDuration=g/1e3),"boolean"!=typeof l.d.intHTML?l.d.intHTML.empty().remove():l.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&l._fbox_pos()}),l.d.headerText=!1!==l._grabLabel()?l._grabLabel():"flipbox"===c.mode?l.__("titleDateDialogLabel"):l.__("titleTimeDialogLabel"),l.d.intHTML=j("<span>"),j(document).one("popupafteropen",function(){l._fbox_pos()}),c.mode){case"durationflipbox":l.fldOrder=l.__("durationOrder");break;case"timeflipbox":l.fldOrder=l.__("timeFieldOrder");break;case"datetimeflipbox":l.fldOrder=l.__("datetimeFieldOrder");break;case"flipbox":l.fldOrder=l.__("dateFieldOrder")}if("bootstrap4"===l.baseMode&&6<l.fldOrder.length&&(v="btn-sm "+v),f?(!1!==c.minDur&&l.theDate.getEpoch()-l.initDate.getEpoch()<c.minDur&&(l.theDate=new Date(l.initDate.getTime()+1e3*c.minDur),l.lastDuration=c.minDur,y=l._dur(1e3*c.minDur)),!1!==c.maxDur&&l.theDate.getEpoch()-l.initDate.getEpoch()>c.maxDur&&(l.theDate=new Date(l.initDate.getTime()+1e3*c.maxDur),l.lastDuration=c.maxDur,y=l._dur(1e3*c.maxDur))):(l._check(),l._minStepFix()),"flipbox"!==c.mode&&"datetimeflipbox"!==c.mode||(n="bootstrap4"===l.baseMode?"h6":"h4",j(l._spf("<div class='{cls}'><"+n+">{text}</"+n+"></div>",{cls:m+"header text-center",text:l._formatter(l.__("headerFormat"),l.theDate)})).appendTo(l.d.intHTML)),f){for(l._fixstepper(l.fldOrder),n=j(l._spf("<div class='{cls}'></div>",{cls:m+"header ui-grid-"+["a","b","c","d","e"][l.fldOrder.length-2]+" row"})),t=0;t<l.fldOrder.length;t++)j(l._spf("<div class='{cls}'>{text}</div>",{text:l.__("durationLabel")[j.inArray(l.fldOrder[t],h)],cls:m+"fliplab ui-block-"+["a","b","c","d","e"][t]+" col-xs-"+12/l.fldOrder.length})).appendTo(n);for(n.appendTo(l.d.intHTML),D.addClass(b+"d"),l.dateOK=!0,p.d=l._fbox_series(y[0],64,"d",!1),p.h=l._fbox_series(y[1],64,"h",0<y[0]),p.i=l._fbox_series(y[2],60,"i",0<y[0]||0<y[1]),p.s=l._fbox_series(y[3],60,"s",0<y[0]||0<y[1]||0<y[2]),t=0;t<l.fldOrder.length;t++){for(e in o=l.fldOrder[t],r=y[j.inArray(o,h)],i=(a=_.clone().data({field:o,amount:c.durationSteppers[o]})).find("ul"),p[o])j(l._spf("<li class='{cls}'><span>{text}</span></li>",{text:p[o][e][0],cls:v+(p[o][e][1]!==r?c.themeDate:c.themeDatePick)})).appendTo(i);a.appendTo(D)}}else switch(l.fldOrder.length){case 4:D.addClass(b+"d");break;case 5:D.addClass(b+"e");break;case 6:D.addClass(b+"f");break;case 7:D.addClass(b+"g")}for(t=0;t<l.fldOrder.length&&!f;t++){if(r=l.fldOrder[t],i=(a=_.clone().data({field:r,amount:"i"===r?c.minuteStep:1})).find("ul"),"function"==typeof l._fbox_mktxt[r]){for(e=-1*c.flen[r];e<c.flen[r]+1;e++)j(l._spf("<li class='{cls}'><span>{text}</span></li>",{cls:v+(0!==e?c.themeDate:c.themeDatePick),text:l._fbox_mktxt[r].apply(l,["i"===r?e*c.minuteStep:e])})).appendTo(i);a.appendTo(D)}if("a"===r&&12===l.__("timeFormat")){for(d=j("<li class='"+v+c.themeDate+"'><span>&nbsp;</span></li>"),e=-1*(n=11<l.theDate.get(3)?[c.themeDate,c.themeDatePick,2,5]:[c.themeDatePick,c.themeDate,2,3])[2];e<n[3];e++)e<0||1<e?d.clone().appendTo(i):j(l._spf("<li class='{cls}'><span>{text}</span></li>",{cls:v+n[e],text:l.__("meridiem")[e]})).appendTo(i);a.appendTo(D)}}if(l.d.intHTML.append(D),j("<div>",{class:m+"flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(l.d.intHTML),c.useSetButton||c.useClearButton||c.useCancelButton||c.useTodayButton||c.useTomorrowButton){if(s=j("<div>",{class:m+"controls"}),c.useSetButton){switch(c.mode){case"timeflipbox":n=l.__("setTimeButtonLabel");break;case"durationflipbox":n=l.__("setDurationButtonLabel");break;case"flipbox":case"datetimeflipbox":n=l.__("setDateButtonLabel")}s.append(l._stdBtn.close.apply(l,[n]))}c.useTodayButton&&s.append(l._stdBtn.today.apply(l)),c.useTomorrowButton&&s.append(l._stdBtn.tomorrow.apply(l)),c.useClearButton&&s.append(l._stdBtn.clear.apply(l)),c.useCancelButton&&s.append(l._stdBtn.cancel.apply(l)),l._controlGroup(s).appendTo(l.d.intHTML)}l.wheelExists&&l.d.intHTML.on("mousewheel",".ui-overlay-shadow",function(e,t){e.preventDefault(),l._offset(j(this).data("field"),(t<0?1:-1)*j(this).data("amount"))}),l.d.intHTML.on(u.eStart,"ul",function(e,t){u.move||(void 0!==t&&(e=t),u.move=!0,u.target=j(this).find("li").first(),u.pos=parseInt(u.target.css("marginTop").replace(/px/i,""),10),u.start="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageY:e.pageY,u.end=!1,u.direc=f?-1:1,u.velocity=0,u.time=Date.now(),e.stopPropagation(),e.preventDefault())})},slidebox:function(){var e,t,a,n,i,o,s,r=this,d=this.options,l=this.drag,c="ui-datebox-",u=j("<div class='"+c+"sliderow-int'></div>"),p=j("<div>"),h=j("<div>",{class:c+"slide"});for("boolean"!=typeof r.d.intHTML?r.d.intHTML.remove().empty():r.d.input.on("datebox",function(e,t){"postrefresh"===t.method&&r._sbox_pos()}),r.d.headerText=!1!==r._grabLabel()?r._grabLabel():r.__("titleDateDialogLabel"),r.d.intHTML=j("<span class='"+c+"nopad'>"),r.fldOrder=r.__("slideFieldOrder"),r._check(),r._minStepFix(),s="bootstrap4"===r.baseMode?"h6":"h4",j("<div class='"+c+"header text-center'><"+s+">"+r._formatter(r.__("headerFormat"),r.theDate)+"</"+s+"></div>").appendTo(r.d.intHTML),r.d.intHTML.append(h),t=0;t<r.fldOrder.length;t++)if(i=r.fldOrder[t],n=p.clone().addClass(c+"sliderow").data("rowtype",i),a=u.clone().data("rowtype",i).appendTo(n),!0===r.__("isRTL")&&a.css("direction","rtl"),"function"==typeof r._sbox_mktxt[i]){for(e=-1*d.slen[i];e<d.slen[i]+1;e++)o=r._sbox_mktxt[i].apply(r,[e]),j("<div>",{class:c+"slidebox "+c+o[0]+d.btnCls+(0===e?d.themeDatePick:d.themeDate)}).html(o[1]).data("offset",e).appendTo(a);"bootstrap"===r.baseMode&&n.find(".btn-sm").removeClass("btn-sm").addClass("btn-xs"),n.appendTo(h)}(d.useSetButton||d.useClearButton||d.useCancelButton||d.useTodayButton||d.useTomorrowButton)&&(t=j("<div>",{class:c+"controls "+c+"repad"}),d.useSetButton&&t.append(r._stdBtn.close.apply(r,[r.__("setDateButtonLabel")])),d.useTodayButton&&t.append(r._stdBtn.today.apply(r)),d.useTomorrowButton&&t.append(r._stdBtn.tomorrow.apply(r)),d.useClearButton&&t.append(r._stdBtn.clear.apply(r)),d.useCancelButton&&t.append(r._stdBtn.cancel.apply(r)),r._controlGroup(t).appendTo(r.d.intHTML)),r.wheelExists&&r.d.intHTML.on("mousewheel",".ui-datebox-sliderow-int",function(e,t){e.preventDefault(),r._offset(j(this).data("rowtype"),(t<0?-1:1)*("i"===j(this).data("rowtype")?d.minuteStep:1))}),r.d.intHTML.on(d.clickEvent,".ui-datebox-sliderow-int>div",function(e){e.preventDefault(),r._offset(j(this).parent().data("rowtype"),parseInt(j(this).data("offset"),10))}),r.d.intHTML.on(l.eStart,".ui-datebox-sliderow-int",function(e){l.move||(l.move=!0,l.target=j(this),l.pos=parseInt(l.target.css("marginLeft").replace(/px/i,""),10),l.start="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageX:e.pageX,l.end=!1,l.velocity=0,l.time=Date.now(),e.stopPropagation(),e.preventDefault())})}},_drag:{default:function(){return!1},timeflipbox:function(){this._drag.flipbox.apply(this)},datetimeflipbox:function(){this._drag.flipbox.apply(this)},durationflipbox:function(){this._drag.flipbox.apply(this)},flipbox:function(){var d=this,l=this.options,c=this.drag;j(document).on(c.eMove,function(e){if(c.move&&"flipbox"===l.mode.slice(-7))return c.end="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageY:e.pageY,c.target.attr("style","margin-top: "+(c.pos+c.end-c.start)+"px !important"),c.elapsed=Date.now()-c.time,c.velocity=100*(c.end-c.start)/(1+c.elapsed)*.8+.2*c.velocity,e.preventDefault(),e.stopPropagation(),!1}),j(document).on(c.eEnd,function(e){var t,a,n,i,o,s,r;c.move&&"flipbox"===l.mode.slice(-7)&&(c.velocity<15&&-15<c.velocity||!l.useKinetic?((c.move=!1)!==c.end&&(e.preventDefault(),e.stopPropagation(),c.tmp=c.target.parent().parent(),d._offset(c.tmp.data("field"),parseInt((c.start-c.end)/(c.target.outerHeight()-2),10)*c.tmp.data("amount")*c.direc)),c.start=!1,c.end=!1):(c.move=!1,c.start=!1,c.end=!1,c.tmp=c.target.parent().parent(),t=c.target.outerHeight(),a=-.8*c.velocity*Math.exp(-c.elapsed/325)*8*-1,n=parseInt(c.target.css("marginTop").replace(/px/i,""),10),i=parseInt(n+a,10),o=c.pos-i,s=Math.round(o/t),r=s*c.tmp.data("amount")*c.direc,c.target.animate({marginTop:i},parseInt(1e4/c.velocity)+1e3,function(){d._offset(c.tmp.data("field"),r)}),e.preventDefault(),e.stopPropagation()))})},slidebox:function(){var d=this,l=this.options,c=this.drag;j(document).on(c.eMove,function(e){if(c.move&&"slidebox"===l.mode)return c.end="touch"===e.type.substr(0,5)?e.originalEvent.changedTouches[0].pageX:e.pageX,c.target.css("marginLeft",c.pos+c.end-c.start+"px"),c.elapsed=Date.now()-c.time,c.velocity=100*(c.end-c.start)/(1+c.elapsed)*.8+.2*c.velocity,e.preventDefault(),e.stopPropagation(),!1}),j(document).on(c.eEnd,function(e){var t,a,n,i,o,s,r;c.move&&"slidebox"===l.mode&&(c.velocity<15&&-15<c.velocity||!l.useKinetic?((c.move=!1)!==c.end&&(e.preventDefault(),e.stopPropagation(),c.tmp=c.target.find("div").first(),d._offset(c.target.data("rowtype"),(d.__("isRTL")?-1:1)*parseInt((c.start-c.end)/c.tmp.innerWidth(),10)*("i"===c.target.data("rowtype")?l.minuteStep:1))),c.start=!1,c.end=!1):(c.move=!1,c.start=!1,c.end=!1,c.tmp=c.target.find("div").first(),t=c.tmp.innerWidth(),a=-.8*c.velocity*Math.exp(-c.elapsed/325)*8*-1,n=parseInt(c.target.css("marginLeft").replace(/px/i,""),10),i=parseInt(n+a,10),o=c.pos-i,s=Math.round(o/t),r=s*("i"===c.target.data("rowtype")?l.minuteStep:1),c.target.animate({marginLeft:i},parseInt(1e4/c.velocity)+1e3,function(){d._offset(c.target.data("rowtype"),r)}),e.preventDefault(),e.stopPropagation()))})}},_offset:function(e,t,a){var n,i,o=this,s=this.options,r=this.theDate,d=!1,l=!1,c=32-o.theDate.copy([0],[0,0,32,13]).getDate();if(e=(e||"").toLowerCase(),i=j.inArray(e,["y","m","d","h","i","s"]),void 0===a&&(a=!0),"a"===e||void 0!==s.rolloverMode[e]&&!0!==s.rolloverMode[e])switch(e){case"y":d=0;break;case"m":o._btwn(r.get(1)+t,-1,12)?d=1:l=(n=r.get(1)+t)<0?[1,12+n]:[1,n%12];break;case"d":o._btwn(r.get(2)+t,0,c+1)?d=2:l=(n=r.get(2)+t)<1?[2,c+n]:[2,n%c];break;case"h":o._btwn(r.get(3)+t,-1,24)?d=3:l=(n=r.get(3)+t)<0?[3,24+n]:[3,n%24];break;case"i":o._btwn(r.get(4)+t,-1,60)?d=4:l=(n=r.get(4)+t)<0?[4,59+n]:[4,n%60];break;case"s":o._btwn(r.get(5)+t,-1,60)?d=5:l=(n=r.get(5)+t)<0?[5,59+n]:[5,n%60];break;case"a":o._offset("h",12*(0<t?1:-1),!1)}else d=i;!1!==d?o.theDate.adj(d,t):o.theDate.setD(l[0],l[1]),!0===a&&o.refresh(),s.useImmediate&&o._t({method:"doset"}),!1!==o.calBackDate&&o._t({method:"displayChange",selectedDate:o.calBackDate,shownDate:o.theDate,thisChange:e,thisChangeAmount:t}),o._t({method:"offset",type:e,amount:t,newDate:o.theDate})},_startOffset:function(e){var t=this.options;return!1!==t.startOffsetYears&&e.adj(0,t.startOffsetYears),!1!==t.startOffsetMonths&&e.adj(1,t.startOffsetMonths),!1!==t.startOffsetDays&&e.adj(2,t.startOffsetDays),e},getTheDate:function(){return!1!==this.calBackDate?this.calBackDate:this.theDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return this.calDateVisible},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.calBackDate=!1,this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a;return this.fmtOver=e,a=this._makeDate(t),this.fmtOver=!1,a},callFormat:function(e,t,a){return void 0===a&&(a=!1),this._formatter(e,t,a)},refresh:function(){var e=this,t=this.options;void 0===e._build[t.mode]?e._build.default.apply(e,[]):e._build[t.mode].apply(e,[]),!0===e.__("useArabicIndic")&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var a,n,i,o=this,s=this.options,r=new this._date;a=o._pa([0,0,0],r),void 0===e&&(e=!0),void 0===t&&(t=!0),!0!==t&&!1!==s.minDays||void 0===o.d.input.attr("min")||(n=o.d.input.attr("min").split("-"),i=(new o._date(n[0],n[1]-1,n[2],0,0,0,0).getTime()-a.getTime())/864e5,s.minDays=Math.round(-1*i,10)),!0!==t&&!1!==s.maxDays||void 0===o.d.input.attr("max")||(n=o.d.input.attr("max").split("-"),i=(new o._date(n[0],n[1]-1,n[2],0,0,0,0).getTime()-a.getTime())/864e5,s.maxDays=Math.round(i,10)),!0===e&&o._t({method:"refresh"})},_dur:function(e){var a=[e/864e5,e/36e5%24,e/6e4%60,e/1e3%60];return j.each(a,function(e,t){a[e]=t<0?0:Math.floor(t)}),a},__:function(e){var t=this.options,a=t.lang[t.useLang],n=t[t.mode+"lang"],i="override"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t[i]?t[i]:void 0!==a&&void 0!==a[e]?a[e]:void 0!==n&&void 0!==n[e]?n[e]:void 0!==t.lang.default[e]?t.lang.default[e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if(void 0!==e.fmtOver&&!1!==e.fmtOver)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");case"datetimebox":case"datetimeflipbox":return e.__("datetimeFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return void 0!==t&&"-"===t?String(e):(e<10?"0":"")+String(e)},_dRep:function(e,t){var a,n,i=48,o=57,s=1584,r="";for(-1===t&&(i+=s,o+=s,s=-1584),n=0;n<e.length;n++)r+=i<=(a=e.charCodeAt(n))&&a<=o?String.fromCharCode(a+s):String.fromCharCode(a);return r},_doIndic:function(){var e=this;e.d.intHTML.find("*").each(function(){j(this).children().length<1?j(this).text(e._dRep(j(this).text())):j(this).hasClass("ui-datebox-slideday")&&j(this).html(e._dRep(j(this).html()))}),e.d.intHTML.find("input").each(function(){j(this).val(e._dRep(j(this).val()))})},_n:function(e,t){return e<0?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,a){return t<e&&e<a},_grabLabel:function(){var e,t,a=this.options,n=!1;return void 0===a.overrideDialogLabel?(e=this.d.input.attr("placeholder"),t=this.d.input.attr("title"),void 0!==e?e:void 0!==t?t:""!==(n=j(document).find("label[for='"+this.d.input.attr("id")+"']").text())&&n):a.overrideDialogLabel},_t:function(e){this.d.input.trigger("datebox",e)},_spf:function(e,a){return j.isArray(a)||j.isPlainObject(a)?e.replace(/{(.+?)}/g,function(e,t){return a[t]}):e},_cal_gen:function(e,t,a,n,i){var o=0,s=0,r=1,d=1,l=[],c=[],u=!1;for(o=0;o<=5;o++)if(!1===u){for(c=[],s=0;s<=6;s++)0===o&&s<e?!0===n?c.push([t+(s-e)+1,i-1]):c.push(" "):3<o&&a<r?(!0===n?(c.push([d,i+1]),d++):c.push(" "),u=!0):(c.push([r,i]),a<++r&&(u=!0));l.push(c)}return l},_cal_check:function(e,t,a,n,i){var o,s=this,r=this.options,d=i.x,l=i.i,c=i.t,u=i.p,p=new this._date(t,a,n,12,0,0,0).getDay(),h=r.blackDatesRec,f=r.highDatesRec,m={ok:!0,iso:t+"-"+s._zPad(a+1)+"-"+s._zPad(n),theme:r.themeDate,force:!1,recok:!0,rectheme:!1};if(12===a&&(m.iso=t+1+"-01-"+s._zPad(n)),-1===a&&(m.iso=t-1+"-12-"+s._zPad(n)),m.comp=parseInt(m.iso.replace(/-/g,""),10),!1!==h)for(o=0;o<h.length;o++)-1!==h[o][0]&&h[o][0]!==t||-1!==h[o][1]&&h[o][1]!==a||-1!==h[o][2]&&h[o][2]!==n||(m.ok=!1);if(j.isArray(r.enableDates)&&j.inArray(m.iso,r.enableDates)<0?m.ok=!1:e&&(!0!==m.recok||r.afterToday&&c.comp()>m.comp||r.beforeToday&&c.comp()<m.comp||r.notToday&&c.comp()===m.comp||!1!==r.maxDays&&d.comp()<m.comp||!1!==r.minDays&&l.comp()>m.comp||j.isArray(r.blackDays)&&-1<j.inArray(p,r.blackDays)||j.isArray(r.blackDates)&&-1<j.inArray(m.iso,r.blackDates))&&(m.ok=!1),j.isArray(r.whiteDates)&&-1<j.inArray(m.iso,r.whiteDates)&&(m.ok=!0),m.ok){if(!1!==f)for(o=0;o<f.length;o++)-1!==f[o][0]&&f[o][0]!==t||-1!==f[o][1]&&f[o][1]!==a||-1!==f[o][2]&&f[o][2]!==n||(m.rectheme=!0);!r.calHighPick||n!==u||""===s.d.input.val()&&!1===r.defaultValue?r.calHighToday&&m.comp===c.comp()?m.theme=r.themeDateToday:r.calHighPick&&s.calDateVisible&&!1!==s.calBackDate&&s.calBackDate.comp()===m.comp?(m.theme=r.themeDatePick,m.force=!0):j.isArray(r.highDatesAlt)&&-1<j.inArray(m.iso,r.highDatesAlt)?m.theme=r.themeDateHighAlt:j.isArray(r.highDates)&&-1<j.inArray(m.iso,r.highDates)?m.theme=r.themeDateHigh:j.isArray(r.highDays)&&-1<j.inArray(p,r.highDays)?m.theme=r.themeDayHigh:j.isArray(r.highDatesRec)&&!0===m.rectheme&&(m.theme=r.themeDateHighRec):m.theme=r.themeDatePick}else m.theme=r.disabledState;return m},_cal_prev_next:function(e){var t=this,a=this.options,n="ui-datebox-";j(t._spf("<div class='{class}'><a href='#'>{name}</a></div>",{class:n+"gridplus"+(t.__("isRTL")?"-rtl":""),name:t._spf(a.s.cal.nextMonth,{text:t.__("nextMonth"),icon:a.calNextMonthIcon})})).prependTo(e).find("a").addClass(function(){switch(t.baseMode){case"jqm":return a.btnCls+a.themeDate+a.icnCls+a.calNextMonthIcon;case"bootstrap":return a.btnCls+a.themeDate+" pull-"+(t.__("isRTL")?"left":"right");case"bootstrap4":return a.btnCls+a.themeDate+" float-"+(t.__("isRTL")?"left":"right");default:return null}}).on(a.clickEventAlt,function(e){return e.preventDefault(),e.stopPropagation(),t.calNext&&(!1===t.calBackDate&&(t.calBackDate=new Date(t.theDate.getTime())),28<t.theDate.getDate()&&t.theDate.setDate(1),t._offset("m",1)),!1}),j(t._spf("<div class='{class}'><a href='#'>{name}</a></div>",{class:n+"gridminus"+(t.__("isRTL")?"-rtl":""),name:t._spf(a.s.cal.prevMonth,{text:t.__("prevMonth"),icon:a.calPrevMonthIcon})})).prependTo(e).find("a").addClass(function(){switch(t.baseMode){case"jqm":return a.btnCls+a.themeDate+a.icnCls+a.calPrevMonthIcon;case"bootstrap":return a.btnCls+a.themeDate+" pull-"+(t.__("isRTL")?"right":"left");case"bootstrap4":return a.btnCls+a.themeDate+" float-"+(t.__("isRTL")?"right":"left");default:return null}}).on(a.clickEventAlt,function(e){return e.preventDefault(),e.stopPropagation(),t.calPrev&&(!1===t.calBackDate&&(t.calBackDate=new Date(t.theDate.getTime())),28<t.theDate.getDate()&&t.theDate.setDate(1),t._offset("m",-1)),!1})},_cal_pickers:function(e,t,a){var n,i,o,s=this,r=this.options,d="ui-datebox-",l=(new Date).get(0),c=j("<div>").addClass("ui-datebox-cal-pickers");for(r.calNoHeader&&r.calUsePickersIcons&&c.addClass("ui-datebox-pickicon"),c.i=j("<fieldset>").appendTo(c),c.a=j("<select>").appendTo(c.i),c.b=j("<select>").appendTo(c.i),o=0;o<=11;o++)c.a.append(j("<option value='"+o+"'"+(e===o?" selected='selected'":"")+">"+s.__("monthsOfYear")[o]+"</option>"));for(n=r.calYearPickMin<1?(r.calYearPickRelative?t:l)+r.calYearPickMin:r.calYearPickMin<1800?(r.calYearPickRelative?t:l)-r.calYearPickMin:"NOW"===r.calYearPickMin?a[0]:r.calYearPickMin,i=r.calYearPickMax<1800?(r.calYearPickRelative?t:l)+r.calYearPickMax:"NOW"===r.calYearPickMax?a[0]:r.calYearPickMax,o=n;o<=i;o++)c.b.append(j("<option value='"+o+"'"+(t===o?" selected='selected'":"")+">"+o+"</option>"));switch(c.a.on("change",function(){!1===s.calBackDate&&(s.calBackDate=new Date(s.theDate.getTime())),s.theDate.setD(1,j(this).val()),s.theDate.get(1)!==parseInt(j(this).val(),10)&&s.theDate.setD(2,0),!1!==s.calBackDate&&s._t({method:"displayChange",selectedDate:s.calBackDate,shownDate:s.theDate,thisChange:"p",thisChangeAmount:null}),s.refresh()}),c.b.on("change",function(){!1===s.calBackDate&&(s.calBackDate=new Date(s.theDate.getTime())),s.theDate.setD(0,j(this).val()),s.theDate.get(1)!==parseInt(c.a.val(),10)&&s.theDate.setD(2,0),!1!==s.calBackDate&&s._t({method:"displayChange",selectedDate:s.calBackDate,shownDate:s.theDate,thisChange:"p",thisChangeAmount:null}),s.refresh()}),s.baseMode){case"bootstrap":case"jqueryui":c.i.find("select").addClass("form-control input-sm").css({marginTop:"3px",float:"left"}).first().css({width:"60%"}).end().last().css({width:"40%"}),r.calNoHeader&&r.calUsePickersIcons?s.d.intHTML.find("."+d+"gridheader").append(c):c.appendTo(s.d.intHTML);break;case"bootstrap4":c.i.find("select").addClass("form-control form-control-sm input-sm").css({marginTop:"3px",float:"left",height:"auto"}).first().css({width:"60%"}).end().last().css({width:"40%"}),c.i.addClass("w-100"),r.calNoHeader&&r.calUsePickersIcons?s.d.intHTML.find("."+d+"gridheader").append(c):c.appendTo(s.d.intHTML);break;case"jqm":c.i.controlgroup({mini:!0,type:"horizontal"}),c.i.find("select").selectmenu({nativeMenu:!0}),c.i.find(".ui-controlgroup-controls").css({marginRight:"auto",marginLeft:"auto",width:"100%",display:"table"}),c.i.find(".ui-select").first().css({width:"60%"}).end().last().css({width:"40%"}),r.calNoHeader&&r.calUsePickersIcons&&c.i.css({padding:"0 10px 5px 10px"}),c.appendTo(s.d.intHTML)}},_cal_date_list:function(e){var t,a,n=this,i=this.options,o=j("<div>").addClass("ui-datebox-pickcontrol");for(o.a=j("<select name='pickdate'></select>").appendTo(o),o.a.append("<option value='false' selected='selected'>"+n.__("calDateListLabel")+"</option>"),t=0;t<i.calDateList.length;t++)o.a.append(j(n._spf("<option value='{0}'>{1}</option>",i.calDateList[t])));switch(o.a.on("change",function(){a=j(this).val().split("-"),n.theDate=new n._date(a[0],a[1]-1,a[2],0,0,0,0),n._t({method:"doset"})}),n.baseMode){case"jqm":o.find("select").selectmenu({mini:!0,nativeMenu:!0});break;case"bootstrap":case"bootstrap4":o.find("select").addClass("form-control input-sm")}o.appendTo(e)},_dbox_run:function(){var e=this,t=this.drag,a=parseInt(6.09+142.8*Math.pow(Math.E,-.039*t.cnt),10);t.didRun=!0,t.cnt++,e._offset(t.target[0],t.target[1],!1),e._dbox_run_update(),e.runButton=setTimeout(function(){e._dbox_run()},a)},_dbox_run_update:function(e){var t=this,a=this.options,n=t.theDate.getTime()-t.initDate.getTime(),i="durationbox"===a.mode,o=t._dur(n<0?0:n);n<0&&(t.lastDuration=0,i&&t.theDate.setTime(t.initDate.getTime())),i&&(t.lastDuration=n/1e3,!1!==a.minDur&&t.theDate.getEpoch()-t.initDate.getEpoch()<a.minDur&&(t.theDate=new Date(t.initDate.getTime()+1e3*a.minDur),t.lastDuration=a.minDur,o=t._dur(1e3*a.minDur)),!1!==a.maxDur&&t.theDate.getEpoch()-t.initDate.getEpoch()>a.maxDur&&(t.theDate=new Date(t.initDate.getTime()+1e3*a.maxDur),t.lastDuration=a.maxDur,o=t._dur(1e3*a.maxDur))),!0!==e&&!0!==i&&(t._check(),"datebox"===a.mode&&t.d.intHTML.find(".ui-datebox-header").find("h4").text(t._formatter(t.__("headerFormat"),t.theDate)),a.useSetButton&&(!1===t.dateOK?t.setBut.addClass(a.disabledState):t.setBut.removeClass(a.disabledState))),t.d.divIn.find("input").each(function(){switch(j(this).data("field")){case"y":j(this).val(t.theDate.get(0));break;case"m":j(this).val(t.theDate.get(1)+1);break;case"d":j(this).val(i?o[0]:t.theDate.get(2));break;case"h":i?j(this).val(o[1]):12===t.__("timeFormat")?j(this).val(t.theDate.get12hr()):j(this).val(t.theDate.get(3));break;case"i":i?j(this).val(o[2]):j(this).val(t._zPad(t.theDate.get(4)));break;case"M":j(this).val(t.__("monthsOfYearShort")[t.theDate.get(1)]);break;case"a":j(this).val(t.__("meridiem")[11<t.theDate.get(3)?1:0]);break;case"s":i?j(this).val(o[3]):j(this).val(t._zPad(t.theDate.get(5)))}}),!0===t.__("useArabicIndic")&&t._doIndic()},_dbox_vhour:function(e){var t,a=this.options,n=[25,0],i=[25,0];return!1===a.validHours||(-1<j.inArray(this.theDate.getHours(),a.validHours)||(t=this.theDate.getHours(),j.each(a.validHours,function(){(t<this?1:-1)===e?n[0]>Math.abs(this-t)&&(n=[Math.abs(this-t),parseInt(this,10)]):i[0]>Math.abs(this-t)&&(i=[Math.abs(this-t),parseInt(this,10)])}),void(0!==n[1]?this.theDate.setHours(n[1]):this.theDate.setHours(i[1]))))},_dbox_enter:function(e){var t,a=this,n=0;if("M"===e.data("field")&&-1<(t=j.inArray(e.val(),a.__("monthsOfYearShort")))&&a.theDate.setMonth(t),""!==e.val()&&0===e.val().toString().search(/^[0-9]+$/))switch(e.data("field")){case"y":a.theDate.setD(0,parseInt(e.val(),10));break;case"m":a.theDate.setD(1,parseInt(e.val(),10)-1);break;case"d":a.theDate.setD(2,parseInt(e.val(),10)),n+=86400*parseInt(e.val(),10);break;case"h":a.theDate.setD(3,parseInt(e.val(),10)),n+=3600*parseInt(e.val(),10);break;case"i":a.theDate.setD(4,parseInt(e.val(),10)),n+=60*parseInt(e.val(),10);break;case"s":a.theDate.setD(5,parseInt(e.val(),10)),n+=parseInt(e.val(),10)}"durationbox"===this.options.mode&&a.theDate.setTime(a.initDate.getTime()+1e3*n),setTimeout(function(){a.refresh()},150)},_dbox_button:function(e,t,a){var n=this,i=this.options;return j("<div>").addClass("ui-datebox-datebox-button").addClass(i.btnCls+i.themeButton).addClass(function(){switch(n.baseMode){case"jqm":case"bootstrap":return i.icnCls+(0<e?i.calNextMonthIcon:i.calPrevMonthIcon);default:return null}}).data({field:t,amount:a*e}).append(function(){switch(n.baseMode){case"jqueryui":case"bootstrap4":return j("<span>").addClass(i.icnCls+(0<e?i.calNextMonthIcon:i.calPrevMonthIcon));default:return null}})},_fbox_pos:function(){var e,t,a,n,i=0,o=this.options,s=!1===o.flipboxLensAdjust?"bootstrap4"===this.baseMode?5:0:o.flipboxLensAdjust,r=this.d.intHTML.find(".ui-datebox-flipcontent").innerHeight();this.d.intHTML.find(".ui-datebox-flipcenter").each(function(){t=j(this),i=-1*(r/2-t.innerHeight()/2-3)+s,t.css("top",i)}),this.d.intHTML.find("ul").each(function(){t=j(this),r=t.parent().innerHeight(),a=t.find("li").first(),e=t.find("li").last().offset().top-t.find("li").first().offset().top,n=-1*((e-r)/2+a.outerHeight()),a.attr("style","margin-top: "+n+"px !important")})},_fbox_series:function(e,t,a,n){for(var i,o,s=this.options,r="h"===a?24:60,d=[[e.toString(),e]],l=1;l<=t;l++)i=e+l*s.durationSteppers[a],o=e-l*s.durationSteppers[a],d.unshift([i.toString(),i]),-1<o?d.push([o.toString(),o]):n?d.push([(r+o).toString(),o]):d.push(["",-1]);return d},_fbox_mktxt:{y:function(e){return this.theDate.get(0)+e},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return this.__("monthsOfYearShort")[t.get(1)]},d:function(e){var t=this.options;if(!1===t.rolloverMode||void 0!==t.rolloverMode.d&&!1===t.rolloverMode.d){var a=this.theDate.get(2),n=32-this.theDate.copy([0],[0,0,32,13]).getDate(),i=a+e;return i<1?n+i:0<i%n?i%n:n}return this.theDate.copy([0,0,e]).get(2)},h:function(e){var t=this.theDate.copy([0,0,0,e]);return 12===this.__("timeFormat")?t.get12hr():t.get(3)},i:function(e){return this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))},s:function(e){return this._zPad(this.theDate.copy([0,0,0,0,0,e]).get(5))}},_sbox_pos:function(){var e,t,a,n,i=this;i.d.intHTML.find("div.ui-datebox-sliderow-int").each(function(){e=j(this),a=e.parent().outerWidth(),t=i.__("isRTL")?e.find("div").last():e.find("div").first(),n=e.find("div").length*t.outerWidth(),t.css("marginLeft",(n-a)/2*-1)})},_sbox_mktxt:{y:function(e){return["slideyear",this.theDate.get(0)+e]},m:function(e){var t=this.theDate.copy([0],[0,0,1]).adj(1,e);return["slidemonth",this.__("monthsOfYearShort")[t.get(1)]]},d:function(e){var t=this.theDate.copy([0,0,e]);return["slideday",t.get(2)+"<br /><span class='ui-datebox-slidewday'>"+this.__("daysOfWeekShort")[t.getDay()]+"</span>"]},h:function(e){var t=this.theDate.copy([0,0,0,e]);return["slidehour",12===this.__("timeFormat")?this._formatter("%-I<span class='ui-datebox-slidewday'>%p</span>",t):t.get(3)]},i:function(e){return["slidemins",this._zPad(this.theDate.copy([0,0,0,0,e]).get(4))]}}})}(jQuery),function(e){e(document).ready(function(){e("[data-role='datebox']").each(function(){e(this).datebox()})})}(jQuery);